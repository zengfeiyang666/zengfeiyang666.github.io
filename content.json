{"pages":[{"title":"美好瞬间","text":"","link":"/photo/index.html"},{"title":"About me","text":"","link":"/about/me.html"},{"title":"","text":"[{\"img\":\"/json-data/banner/lonelyreader.png\",\"url\":\"https://lonelyreader.com\",\"alt\":\"孤独的阅读者\"},{\"img\":\"/json-data/banner/blog-build.png\",\"url\":\"https://space.bilibili.com/386767453/channel/detail?cid=89247\",\"alt\":\"博客搭建视频教程\"},{\"img\":\"/json-data/banner/git-github.jpg\",\"url\":\"https://space.bilibili.com/386767453/channel/detail?cid=84534\",\"alt\":\"让你彻底理解Git视频教程\"}]","link":"/json-data/main-banner.json"}],"posts":[{"title":"浏览器缓存之jQuery自动给所有Ajax请求加上时间戳","text":"在使用 jQuery 请求数据时，我们可能希望它能自动附带上一些额外的参数。比如： 让所有请求自动加上时间戳，这样每次请求就不会有缓存。 或者让所有请求自动带上权限认证的 token，这样不用再为每个请求单独添加这个参数。 下面通过样例演示这个功能如何实现。 1，样例代码（1）这里我们使用 jQuery 的 ajaxSetup() 方法来进行全局配置，该方法可以为将来所有的 AJAX 请求设置默认值。（2）通过 ajaxSetup() 方法中的 beforeSend 属性可以设置发送请求前运行的函数（它会拦截所有的请求），我们在此对 url 进行修改，增加个时间戳参数。 12345678910111213141516171819202122232425262728&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;meta charset=&quot;utf-8&quot;&gt; &lt;title&gt;&lt;/title&gt; &lt;script src=&quot;jquery-3.1.1.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot;&gt; //全局配置 $.ajaxSetup({ beforeSend: function(jqXHR, settings) { //在请求前给修改url（增加一个时间戳参数） settings.url += settings.url.match(/\\?/) ? &quot;&amp;&quot; : &quot;?&quot;; settings.url += &quot;token=&quot; + new Date().getTime(); }, }); //按钮点击响应 function btnClick() { $.get(&quot;data.php&quot;, {name: &quot;hangge&quot;}, function(data){ alert(data); }); } &lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;input type=&quot;button&quot; value=&quot;请求数据&quot; onclick=&quot;btnClick()&quot;/&gt; &lt;/body&gt;&lt;/html&gt; 2，效果图点击“请求数据”按钮发起一个简单的get请求。可以看到虽然我们一开始只设置了name 这一个参数，但最终又自动添加了个 token（时间戳）参数。","link":"/2020/03/26/%E6%B5%8F%E8%A7%88%E5%99%A8%E7%BC%93%E5%AD%98%E4%B9%8BjQuery%E8%87%AA%E5%8A%A8%E7%BB%99%E6%89%80%E6%9C%89Ajax%E8%AF%B7%E6%B1%82%E5%8A%A0%E4%B8%8A%E6%97%B6%E9%97%B4%E6%88%B3/"}],"tags":[],"categories":[]}